<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>o.o</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <div class="background-image"></div>
    <div class="profile-section">
      <img src="profile.png" alt="صورة الملف الشخصي" class="profile-picture">
      <h2>Little King</h2>
      <p class="username">@Mahmmoud</p>
      <div class="social-links">
        <a href="#"><img src="youtube.png" alt="YouTube"></a>
        <a href="#"><img src="instagram.png" alt="Instagram"></a>
        <a href="#"><img src="discord.png" alt="Discord"></a>
        <a href="#"><img src="telegram.png" alt="Telegram"></a>
      </div>
    </div>

    <div class="visitor-count">
      <img src="eye-icon.png" alt="علامة عين" class="eye-icon">
      <span id="visitor-count">1</span>
    </div>
  </div>

  <!-- زر عرض الموسيقى -->
  <div class="music-box" id="musicBox">
    <img id="currentSongImage" src="cover1.jpg" alt="Current Song">
  </div>

  <!-- قائمة الأغاني -->
  <div class="song-list" id="songList">
    <div class="song" data-src="اغنية-دمتي-امي-ريمكس-128Kbps-44KHz.m4a" data-img="cover1.jpg" data-title="دمتي يا أمي">
      <div class="song-info">
        <img src="cover1.jpg" alt="cover">
        <span>دمتي يا أمي</span>
      </div>
      <div class="song-controls">
        <button class="song-play-btn">▶</button>
        <button class="song-restart-btn">🔁</button>
      </div>
      <div class="progress-bar"><div class="progress-fill"></div></div>
    </div>
  </div>

  <!-- زر التشغيل العام -->
  <div class="controls" id="controls" style="display: none;">
    <button id="playPauseBtn">▶</button>
    <span id="nowPlaying">لا شيء</span>
  </div>

  <audio id="audioPlayer" loop></audio>

  <script>
    let visitorCount = 160;
    if (localStorage.getItem('visitorCount')) {
      visitorCount = parseInt(localStorage.getItem('visitorCount')) + 1;
    }
    localStorage.setItem('visitorCount', visitorCount);
    document.getElementById('visitor-count').innerText = `${visitorCount}`;

    const musicBox = document.getElementById('musicBox');
    const songList = document.getElementById('songList');
    const controls = document.getElementById('controls');
    const audioPlayer = document.getElementById('audioPlayer');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const nowPlaying = document.getElementById('nowPlaying');
    const currentSongImage = document.getElementById('currentSongImage');

    let isPlaying = false;

    musicBox.addEventListener('click', () => {
      songList.classList.toggle('show');
    });

    document.querySelectorAll('.song').forEach(song => {
      const playBtn = song.querySelector('.song-play-btn');
      const restartBtn = song.querySelector('.song-restart-btn');
      const progressFill = song.querySelector('.progress-fill');
      const src = song.getAttribute('data-src');
      const img = song.getAttribute('data-img');
      const title = song.getAttribute('data-title');

      playBtn.addEventListener('click', () => {
        audioPlayer.src = src;
        currentSongImage.src = img;
        nowPlaying.textContent = title;
        controls.style.display = 'flex';
        audioPlayer.play();
        isPlaying = true;
        playPauseBtn.textContent = '☐';
        songList.classList.remove('show');

        audioPlayer.ontimeupdate = () => {
          const percent = (audioPlayer.currentTime / audioPlayer.duration) * 100;
          progressFill.style.width = `${percent}%`;
        };
      });

      restartBtn.addEventListener('click', () => {
        audioPlayer.currentTime = 0;
        audioPlayer.play();
      });
    });

    playPauseBtn.addEventListener('click', () => {
      if (isPlaying) {
        audioPlayer.pause();
        playPauseBtn.textContent = '▶';
      } else {
        audioPlayer.play();
        playPauseBtn.textContent = '☐';
      }
      isPlaying = !isPlaying;
    });
  </script>
</body>
</html>
